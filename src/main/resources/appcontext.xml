<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- Preferences -->
    <bean id="preferences" scope="singleton"
          class="bravura.sonata.buddy.config.Preferences"
          factory-method="getInstance" />

    <!-- UI -->
    <bean id="ui.tabs.codesAndTypes"
          class="bravura.sonata.buddy.codetypeviewer.CodesAndTypesTab"
          scope="prototype">
        <constructor-arg ref="preferences" />
        <constructor-arg ref="dao.codesAndTypes" />
    </bean>

    <bean id="ui.tabs.navigSearch"
          class="bravura.sonata.buddy.navigsearch.NavigSearchTab"
          scope="prototype">
        <constructor-arg ref="preferences" />
        <constructor-arg ref="dao.navigator" />
    </bean>

    <bean id="ui.controls.dbConnectionPicker"
          class="bravura.sonata.buddy.common.dbconnection.DatabaseConnectionPicker"
          scope="prototype">
        <constructor-arg ref="dbConnections" />
    </bean>

    <!-- Database connections -->
    <bean id="dbConnections"
          class="bravura.sonata.buddy.common.dbconnection.DatabaseConnections"
          scope="singleton"
          init-method="initialize" />

    <bean id="datasource"
          scope="prototype"
          factory-bean="dbConnections"
          factory-method="getCurrentConnectionDatasource" />

    <!-- DAO -->
    <bean id="dao.navigator" class="bravura.sonata.buddy.navigsearch.NavigatorDAOImpl" scope="singleton">
        <constructor-arg ref="dbConnections" />
    </bean>

    <bean id="dao.codesAndTypes" class="bravura.sonata.buddy.codetypeviewer.CodesAndTypesDAOImpl" scope="singleton">
        <constructor-arg ref="dbConnections" />
    </bean>
</beans>